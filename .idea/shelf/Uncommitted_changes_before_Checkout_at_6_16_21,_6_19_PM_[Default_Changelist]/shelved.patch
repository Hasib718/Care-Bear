Index: app/src/main/java/com/hasib/carebear/patient/AppointmentActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.hasib.carebear.patient;\n\nimport android.app.DatePickerDialog;\nimport android.icu.util.Calendar;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.DatePicker;\nimport android.widget.Toast;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport com.google.android.gms.tasks.OnFailureListener;\nimport com.google.android.gms.tasks.OnSuccessListener;\nimport com.google.firebase.auth.FirebaseAuth;\nimport com.google.firebase.database.DataSnapshot;\nimport com.google.firebase.database.DatabaseError;\nimport com.google.firebase.database.DatabaseReference;\nimport com.google.firebase.database.FirebaseDatabase;\nimport com.google.firebase.database.ValueEventListener;\nimport com.hasib.carebear.databinding.ActivityAppointmentBinding;\nimport com.hasib.carebear.doctor.container.Chamber;\nimport com.hasib.carebear.doctor.container.Doctor;\nimport com.hasib.carebear.patient.container.Appointment;\nimport com.hasib.carebear.support.CareBear;\n\nimport org.jetbrains.annotations.NotNull;\n\nimport java.text.DateFormat;\nimport java.text.SimpleDateFormat;\n\npublic class AppointmentActivity extends AppCompatActivity implements DatePickerDialog.OnDateSetListener {\n\n    private static final String TAG = AppointmentActivity.class.getSimpleName();\n\n    private ActivityAppointmentBinding binding;\n    private Chamber chamber;\n    private Doctor doctor;\n    private Calendar calendar;\n\n    private DatabaseReference reference, chamberReference, patientReference;\n    private FirebaseAuth auth;\n\n    private long serial;\n    private String date;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        binding = ActivityAppointmentBinding.inflate(getLayoutInflater());\n        setContentView(binding.getRoot());\n\n        chamber = getIntent().getParcelableExtra(\"clicked_chamber\");\n        doctor = getIntent().getParcelableExtra(\"clicked_chamber_doctor\");\n        Log.d(TAG, \"onCreate: \" + chamber.toString());\n\n        calendar = Calendar.getInstance();\n\n        auth = FirebaseAuth.getInstance(CareBear.getPatientFirebaseApp());\n        reference = FirebaseDatabase.getInstance().getReference(\"appointments\");\n        chamberReference = FirebaseDatabase.getInstance().getReference(\"doctors_chamber_info\").child(chamber.getChamberDatabaseId()).child(\"appointments\");\n        patientReference = FirebaseDatabase.getInstance(CareBear.getPatientFirebaseApp()).getReference(\"patient_profile_info\");\n\n        binding.timepicker.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                showDatePickerDialog();\n            }\n        });\n\n        binding.confirm.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                addAppointment(reference.push().getKey(), chamberReference.push().getKey(), patientReference.push().getKey());\n            }\n        });\n    }\n\n    private void addAppointment(String appointmentsDBKey, String appointmentKeyInChamberDB, String appointmentKeyInPatientDB) {\n        DateFormat format = new SimpleDateFormat(\"MM-dd-yyyy HH:mm:ss\");\n        Appointment appointment = new Appointment(appointmentsDBKey, appointmentKeyInChamberDB, chamber, doctor, format.format(calendar.getTime()), serial);\n\n        reference.child(date)\n                .child(appointmentsDBKey)\n                .setValue(appointment)\n                .addOnSuccessListener(new OnSuccessListener<Void>() {\n                    @Override\n                    public void onSuccess(Void unused) {\n                        Toast.makeText(AppointmentActivity.this, \"Appointment Taken!\", Toast.LENGTH_SHORT).show();\n\n\n                    }\n                })\n                .addOnFailureListener(new OnFailureListener() {\n                    @Override\n                    public void onFailure(@NonNull @NotNull Exception e) {\n                        Toast.makeText(AppointmentActivity.this, \"Task failed!\", Toast.LENGTH_SHORT).show();\n                        Log.d(TAG, \"onFailure: \" + e);\n                    }\n                });\n\n        chamberReference.child(date)\n                .child(appointmentKeyInChamberDB)\n                .setValue(appointmentsDBKey)\n                .addOnSuccessListener(new OnSuccessListener<Void>() {\n                    @Override\n                    public void onSuccess(Void unused) {\n                        Toast.makeText(AppointmentActivity.this, \"Appointment Taken!\", Toast.LENGTH_SHORT).show();\n\n\n                    }\n                })\n                .addOnFailureListener(new OnFailureListener() {\n                    @Override\n                    public void onFailure(@NonNull @NotNull Exception e) {\n                        Toast.makeText(AppointmentActivity.this, \"Task failed!\", Toast.LENGTH_SHORT).show();\n                        Log.d(TAG, \"onFailure: \" + e);\n                    }\n                });\n\n        patientReference.child(auth.getCurrentUser().getUid())\n                .child(\"appointments\")\n                .child(appointmentKeyInPatientDB)\n                .setValue(appointment)\n                .addOnSuccessListener(new OnSuccessListener<Void>() {\n                    @Override\n                    public void onSuccess(Void unused) {\n                        Toast.makeText(AppointmentActivity.this, \"Appointment Taken!\", Toast.LENGTH_SHORT).show();\n                    }\n                })\n                .addOnFailureListener(new OnFailureListener() {\n                    @Override\n                    public void onFailure(@NonNull @NotNull Exception e) {\n                        Toast.makeText(AppointmentActivity.this, \"Task failed!\", Toast.LENGTH_SHORT).show();\n                        Log.d(TAG, \"onFailure: \" + e);\n                    }\n                });\n\n    }\n\n    private void showDatePickerDialog() {\n        DatePickerDialog pickerDialog = new DatePickerDialog(\n                this,\n                this,\n                Calendar.getInstance().get(Calendar.YEAR),\n                Calendar.getInstance().get(Calendar.MONTH),\n                Calendar.getInstance().get(Calendar.DAY_OF_MONTH)\n        );\n\n        pickerDialog.getDatePicker().setMinDate(calendar.getTime().getTime());\n        pickerDialog.getDatePicker().setMaxDate(calendar.getTime().getTime() + 51_84_00_000L);\n        pickerDialog.show();\n    }\n\n    @Override\n    public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {\n        date = String.format(\"%s-%s-%s\", dayOfMonth, month, year);\n        binding.setDate.setText(date);\n\n        checkSerialCount(date);\n    }\n\n    private void checkSerialCount(String date) {\n        chamberReference.child(date).addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull @NotNull DataSnapshot dataSnapshot) {\n                if (dataSnapshot.exists()) {\n                    updateCount(dataSnapshot.getChildrenCount());\n                }\n            }\n\n            @Override\n            public void onCancelled(@NonNull @NotNull DatabaseError databaseError) {\n\n            }\n        });\n    }\n\n    private void updateCount(long childrenCount) {\n        if (childrenCount >= 40) {\n            Toast.makeText(this, \"Appointment Slot is Full. Choose another date.\", Toast.LENGTH_SHORT).show();\n        } else {\n            binding.currentSerial.setText(String.valueOf(childrenCount));\n            binding.yourSerial.setText(String.valueOf(childrenCount + 1));\n            binding.confirm.setClickable(true);\n\n            serial = childrenCount;\n        }\n    }\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/hasib/carebear/patient/AppointmentActivity.java	(revision 97eaa5a3b25495fbf2790109e02fc732c21f6301)
+++ app/src/main/java/com/hasib/carebear/patient/AppointmentActivity.java	(date 1623790630396)
@@ -185,7 +185,7 @@
             binding.yourSerial.setText(String.valueOf(childrenCount + 1));
             binding.confirm.setClickable(true);
 
-            serial = childrenCount;
+            serial = childrenCount+1;
         }
     }
 }
\ No newline at end of file
